### Title 树上的到路径的路径

##### 1 emphasis



##### 2 key points

**定义：**

 树上点到路径的距离定义为 节点到路径上所有节点的最短路。即假设节点$x$到节点$y$的路径为$(x,p_0,p_1,...,p_k,y)$，那么节点$v$到路径$(x,y)$的最短路为节点$v$到路径$(x,y)$上所有节点的距离的最小值$min(dist(v,x), dist(v,p_0),...,dist(v,p_k),dist(v,y))$



节点$v$到路径$(x,y)$的最短路径公式为：

$dist(v,\ (x,y)\ ) = min(\ dist(v,x), \ dist(v,p_0),...,\ dist(v,p_k),\ dist(v,y))$





**公式：**

树上节点$v$到路径$(x,y)$的距离：

$dist(v,\ (x,y)\ ) = \frac{dist(v,\ x) + dist(v, \ y) - dist(x, \ y)}{2}$

> 证明：$dist(v,\ (x,y)\ ) = \frac{dist(v,\ x) + dist(v, \ y) - dist(x, \ y)}{2}$
>
> 不难发现，树上点和路径存在三种关系：
>
> 关系一：点$v$在路径$(x,y)$上                       $x, ..., v, ..., y$ 
>
> 此时，$dist(v,\ (x,y)\ ) = \frac{dist(v,\ x) + dist(v, \ y) - dist(x, \ y)}{2} = 0$
>
> 
>
> 关系二：点$v$在路径$(x,y)$延长线上           $v, ..., x, ..., y$ 
>
> 此时，$dist(v,\ (x,y)\ ) = \frac{dist(v,\ x) + dist(v, \ y) - dist(x, \ y)}{2} = dist(v,\ x)$
>
> 
>
> 关系三：点$v$在路径$(x,y)$外                      $x, ..., u, ..., y$ 
>
> ​                                                                                 |
>
> ​                                                                                 $v$
>
> 此时，$dist(v,\ (x,y)\ ) = \frac{dist(v,\ x) + dist(v, \ y) - dist(x, \ y)}{2} = dist(v,\ u)$
>
> 综上，得证！



推广到一般，则点集合$v_1, v_2, ..., v_n$到路径$(x,y)$的距离之和为：

$dist([v_1, v_2, ..., v_n],\ (x, y)\ ) = \frac{dist(v_1,\ x) + dist(v_1, \ y) + dist(v_2,\ x) + dist(v_2, \ y) + ... + dist(v_n,\ x) + dist(v_n, \ y) - n \cdot dist(x, \ y)}{2}$

##### 3 thought



##### 4 code



##### 5 summary

