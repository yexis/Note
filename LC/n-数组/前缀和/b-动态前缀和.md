### Title 动态前缀和

##### 1 emphasis

- 动态前缀和



##### 2 key points

###### 问题

对于一个数组$a$的前缀和，如果单点修改数组$a$中的某个值，如何动态维护前缀和的值

###### 答案

区间修改线段树

###### 分析

 假设修改的元素为$a[i]$，假设将$a[i]$加$x$，前缀和会如何变化

设原前缀和为$[s_0,s_1,s_2,s_3,...,s_{i-1},s_i,s_{i+1},...,s_n]$

将$a[i]$加$x$后，前缀和会变成$[s_0,s_1,s_2,s_3,...,s_{i-1},s_i,s_{i+1}+x,...,s_n+x]$

**所以将$a[i]$加$x$，其实就是将前缀和中的部分$[s_{i+1}+x,...,s_n+x]$全部加上$x$**

**其实就是在前缀和数组上进行区间操作，懒加载线段树**



###### 动态前缀和 演变过程

```cpp
// 另数组 a = [2, 1, 5, 4, 2, 3]
// 前缀和 sum = [0, 2, 3, 8, 12, 14, 17]    ①

// 若将下标2的元素增加2 a = [2, 1, 7, 4, 2, 3]
// 前缀和 sum = [0, 2, 3, 10, 14, 16, 19]   ②
// 相比于 ①，将 sum[3],...sum[n] 增加2

// 若将下标3的元素增加-5 a = [2, 1, 7, -1, 2, 3]
// 前缀和 sum = [0, 2, 3, 10, 9, 11, 14]    ③
// 相比于 ②，将 sum[4],...sum[n] 增加2

// 从上述操作可以看出，单点修改数组某个位置i，则其前缀和 [i+1,n] 会产生相同变化；
// 对于区间修改，可以采用lazy线段树进行维护
```



##### 3 thought



##### 4 code



##### 5 summary

