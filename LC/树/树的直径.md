```cpp
// 1. 结果应该遍历的同时更新，因为最大直径可能在子树里面而不过根节点
// 2. dfs的返回值为 从当前节点往子树中深入时的最大深度(边的长度)，即函数最终返回的maxd
class Solution {
public:
    int ans = 0;
    int dfs(vector<vector<int>>& g, int idx, int pa) {
        int maxd = 0;
        for (auto nei : g[idx]) {
            if (nei == pa) continue;
            int d = 1 + dfs(g, nei, idx);
            ans = max(ans, maxd + d);
            maxd = max(maxd, d);
        }
        return maxd;
    }
};
```

