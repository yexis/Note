### Title [3806. 增加操作后最大按位与的结果](https://leetcode.cn/problems/maximum-bitwise-and-after-increment-operations/)

##### 1 emphasis



##### 2 key points

 

##### 3 thought



##### 4 code

```cpp
class Solution {
public:
    using ll = long long;
    int maximumAND(vector<int>& a, int K, int M) {
        int n = a.size();

        // 需要直到当前已经能满足的taget的前缀是什么
        int mx = 0; for (int x : a) mx = max(mx, x);
        ll up = K + mx; int B = 64 - __builtin_clzll(up); 
        cout << B << "\n";

        //  
        ll ans = 0;
        for (int d = B - 1; d >= 0; d--) {
            // ans: 1100101 _ 0000
            ll nxt = ans | (1 << d);
            vector<int> vec;
            for (int i = 0; i < n; i++) {
                int x = a[i];
                ll y = (x & nxt) ^ nxt;
                if (y == 0) {
                    vec.push_back(0); continue;
                }
                int z = 64 - __builtin_clzll(y);
                z = (1ll << z) - 1;
                vec.push_back((nxt & z) - (x & z));
            }

            sort(vec.begin(), vec.end());
            ll sm = 0;
            for (int i = 0; i < M; i++) sm += vec[i];
            if (sm <= K) {
                ans = nxt;
            }
        }

        return ans;
    }
};
```



##### 5 summary

