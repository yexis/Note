### Title [3022. 给定操作次数内使剩余元素的或值最小](https://leetcode.cn/problems/minimize-or-of-remaining-elements-using-operations/)

##### 1 emphasis



##### 2 key points

 

##### 3 thought



##### 4 code

```cpp
class Solution {
public:
    int minOrAfterOperations(vector<int>& a, int K) {
        int n = a.size();
        if (n == 1) return a[0];

        int sor = 0; for (auto e : a) sor |= e;
        if (sor == 0) return 0;

        int B = 32 - __builtin_clz(sor); 
        int F = (1 << B) - 1;

        auto check = [&](vector<int>& b, int nxt, int d) -> bool {
            int used = 0; 
            int x = F;
            for (int i = 0; i < n; i++) x &= b[i];
            if ((x >> d << d | nxt) != nxt) return false;
            
            x = F;
            int L = 0; // 上一个子数组的左端点
            for (int i = 0; i < n; i++) {
                x &= b[i];
                if ((x >> d << d | nxt) == nxt) { // 找到最小合法子数组
                    used += i - L;
                    x = F;
                    L = i + 1;
                }
            }
            used += n - L;
            if (used > K) return false;
            return true;
        };

        vector<int> b = a; reverse(b.begin(), b.end()); 
        int ans = 0;
        for (int d = B - 1; d >= 0; d--) {
            int nxt = ans;
            if (check(a, nxt, d)) {
                continue;
            }
            ans |= 1 << d;
        }
        return ans;
    }
};

/*
0111
0011
1111
1110
0010
1000
*/

```





##### 5 summary

